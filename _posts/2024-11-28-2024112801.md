---
title: "[React] Next.jsλ΅ μ•μ•„λ³΄λ” @emotion/styledμ™€ styled-components"
date: 2024-11-28
published: true
toc: true
toc_sticky: true
last_modified_at: 2024-11-28
categories:
  - React
tags:
  - Next.js
  - CSS
  - "@emotion/styled"
  - styled-components
---

## 1. μ„λ΅ 

CSS μ¤νƒ€μΌμ„ μ»΄ν¬λ„νΈμ²λΌ μ μ©ν•λ” λΌμ΄λΈλ¬λ¦¬μ—λ” λ€ν‘μ μΌλ΅ `styled-components`κ°€ μμ–΄μ”.

- μ΄ λΌμ΄λΈλ¬λ¦¬λ” CSS-in-JSλΌλ” λ°©λ²•μΌλ΅ CSS μ†μ„±μ„ Javascript μ½”λ“λ΅ νΈν•κ² μ‘μ„±ν•  μ μλ‹¤λ” μ¥μ μ΄ μμ–΄μ”.
- λν•, μ μ©ν•λ ¤λ” HTML μ”μ†μ— μ΄λ¦„μ„ λ¶™μΌ μ μμ–΄μ„ μλ―Έλ΅ μ μΌλ΅ μ§κ΄€μ μ΄κΈ°λ„ ν•΄μ”.

μ΄μ™€ λΉ„μ·ν•κ² `@emotion/styled`λΌλ” λΌμ΄λΈλ¬λ¦¬λ„ μ΅΄μ¬ν•΄μ”. ν¨ν‚¤μ§€ μ΄λ¦„λ§ λ°”κΏ”λ„ λ  μ •λ„λ΅ APIμ™€ μ‚¬μ©λ²•μ΄ `styled-components`μ™€ μƒλ‹Ήν λΉ„μ·ν• νΉμ§•μ΄ μμ–΄μ”.

κΈ°λ³Έμ μΌλ΅ λ‘ λΌμ΄λΈλ¬λ¦¬λ” ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λ λ”λ§(CSR)μ—μ„ μ‚¬μ©λμ§€λ§, μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§(SSR)μ—μ„λ„ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•λ” λ°©λ²•μ„ μ§€μ›ν•΄μ”.

ν‰μ†μ— λ‘ λΌμ΄λΈλ¬λ¦¬μ μ°¨μ΄μ μ— λ€ν•΄ κ¶κΈν–μ—λ”λ°, μ΄λ²μ— kanji-yomi ν”„λ΅μ νΈλ¥Ό Next.jsλ΅ μ§„ν–‰ν•λ©΄μ„ λ°κ²¬ν• μ°¨μ΄μ μ— λ€ν•΄ μ•μ•„λ³΄λ ¤κ³  ν•΄μ”.

λ‘ λΌμ΄λΈλ¬λ¦¬κ°€ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ μ–΄λ–»κ² λ‹¤λ£¨λ”μ§€λ¥Ό μ¤‘μ μΌλ΅ μ„¤λ…ν•κ² μµλ‹λ‹¤.

## 2. styled-components λΌμ΄λΈλ¬λ¦¬

λ¨Όμ €, `styled-components` λΌμ΄λΈλ¬λ¦¬μ—μ„ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ μ–΄λ–»κ² μ²λ¦¬ν•λ”μ§€ μ•μ•„λ³Όκ²μ”.

`styled-components`λ” μ»΄ν¬λ„νΈκ°€ λ λ”λ§λ  λ•λ§λ‹¤ ν•΄λ‹Ή μ»΄ν¬λ„νΈμ— ν•„μ”ν• μ¤νƒ€μΌμ„ λ™μ μΌλ΅ μƒμ„±ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ—μ„ `<style>` νƒκ·Έλ΅ μ‚½μ…ν•λ” CSR μ¤‘μ‹¬μ λΌμ΄λΈλ¬λ¦¬μ—μ”.

Next.jsμ²λΌ SSR ν™κ²½μ—μ„λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—μ„ λ λ”λ§λ HTML νμΌμ„ μ „λ‹¬λ°›μ•„ Reactμ—μ„ μ‚¬μ©ν•  μ μλ„λ΅ Hydrationμ΄λΌλ” κ³Όμ •μ„ μν–‰ν•΄μ•Ό ν•΄μ”.

μ΄λ¬ν• κ³Όμ •μ—μ„ CSS μ¤νƒ€μΌκ³Ό κ΄€λ ¨λ λ‹¤μκ³Ό κ°™μ€ λ¬Έμ λ“¤μ΄ λ°μƒν•  μ μμ–΄μ”.

1. className λ¶μΌμΉ
2. Flickering

className λ¶μΌμΉ λ¬Έμ λ” Next.js μ„λ²„μ—μ„ λ λ”λ§μ„ ν•  λ• μ„ μ–Έν• className μ²΄ν¬μ„¬κ³Ό ν΄λΌμ΄μ–ΈνΈμ—μ„ λ™μ μΌλ΅ μƒμ„±ν• CSS μ¤νƒ€μΌμ className μ²΄ν¬μ„¬μ΄ μΌμΉν•μ§€ μ•λ” λ¬Έμ μ—μ”. κΈ°μ¤€μ΄ λλ” μ„λ²„μ—μ„ μƒμ„±λ μ²΄ν¬μ„¬μ— ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒμ„±λ μ²΄ν¬μ„¬μ΄ λ§¤ν•‘λμ§€ μ•μ•„μ„ μ¤νƒ€μΌμ„ μ μ©ν•  μ μ—†λ” λ¬Έμ μ—μ”.

className μ²΄ν¬μ„¬μ΄ λ§¤ν•‘μ΄ λμ—λ‹¤κ³  ν•λ”λΌλ„, CSS μ¤νƒ€μΌμ„ ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒμ„±ν–λ‹¤λ©΄ Flickering(κΉλΉ΅μ„) λ¬Έμ κ°€ λ°μƒν•  μ—¬μ§€κ°€ μμ–΄μ”. μ„λ²„μ—μ„ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•μ§€ μ•κΈ° λ•λ¬Έμ—, μ΄κΈ° HTMLμ—λ” CSS μ¤νƒ€μΌμ΄ μ μ©λμ§€ μ•μ•„μ”. μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ™μ μΌλ΅ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•κ³  ν™”λ©΄μ— μ μ©μ΄ λ  λ•κΉμ§€ μ‹κ°„μ΄ κ±Έλ¦¬κΈ° λ•λ¬Έμ—, ν™”λ©΄μ΄ λ³€κ²½λλ©΄μ„ κΉλΉ΅μ„μ΄ λ°μƒν•λ” κ²ƒμ²λΌ λκ»΄μ Έμ”. μ΄λ¥Ό Flickeringμ΄λΌκ³  ν•κ³  μ•„λμ—μ„ λ‹¤μ‹ μ„¤λ…μ„ ν•  μμ •μ΄μ—μ”.

### 2-1. Next.jsμ—μ„ κΈ°μ΅΄κ³Ό κ°™μ€ λ°©λ²•μΌλ΅ μ‚¬μ©ν•΄λ³΄κΈ°

νΉλ³„ν• μ„¤μ •μ„ λ”°λ΅ μ μ©ν•μ§€ μ•κ³ , Next.jsμ—μ„ `styled-components`λ¥Ό μ‚¬μ©ν•λ©΄ μ•„λμ™€ κ°™μ΄ μ¤νƒ€μΌμ΄ μ „ν€ μ μ©λμ§€ μ•λ” κ²ƒμ„ ν™•μΈν•  μ μμ–΄μ”.

<div style="display: flex; justify-content: center" >
  <img width="500px" src="/assets/images/2024112801/styled.gif" alt="styled" >
</div>

μ¤νƒ€μΌμ΄ μ μ©λμ§€ μ•λ” μ΄μ λ” μ„λ²„μ—μ„ μƒμ„±λ `jvrypf` classNameμ΄ `<style>` νƒκ·Έ λ‚΄μ— μ΅΄μ¬ν•λ” μ–΄λ classNameκ³Όλ„ λ§¤ν•‘λμ§€ μ•κΈ° λ•λ¬Έμ΄μ—μ”. ν΄λΌμ΄μ–ΈνΈμ—μ„ CSS μ¤νƒ€μΌμ΄ λ™μ μΌλ΅ μƒμ„±λμ—μ§€λ§, μ λ€λ΅ μ—°κ²°λμ§€ μ•μ•„μ„ λ°μƒν• μ΄μμ—μ”.

<div style="display: flex; justify-content: center" >
  <img width="700px" src="/assets/images/2024112801/classname.png" alt="classname" >
</div>

### 2-2. className λ¶μΌμΉ λ¬Έμ  ν•΄κ²°

λ¨Όμ €, μ„μ—μ„ λ°μƒν• className λ¶μΌμΉ λ¬Έμ λ” Next.jsμ `next.config.mjs` νμΌμ—μ„ ν•΄κ²°ν•  μ μμ–΄μ”.

`π“‚ next.config.mjs`

{% include code-header.html %}

```tsx
/** @type {import('next').NextConfig} */
const nextConfig = {
  compiler: {
    styledComponents: true,
  },
};

export default nextConfig;
```

- μ„μ™€ κ°™μ΄ `compiler.styledComponents`λ¥Ό μ‘μ„±ν•΄μ¤μ”.
- Next.jsκ°€ μλ™μΌλ΅ Babel ν”λ¬κ·ΈμΈ(`babel-plugin-styled-components`)μ„ ν™μ„±ν™”ν•μ—¬ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ className μ²΄ν¬μ„¬μ μΌμΉλ¥Ό λ³΄μ¥ν•΄μ”.

μ„¤μ •μ„ μ μ©ν•λ©΄ μμ—°μ¤λ½μ§€λ” μ•μ§€λ§, CSS μ¤νƒ€μΌμ΄ μ μ©λλ” κ²ƒμ„ ν™•μΈν•  μ μμ–΄μ”. μ”μ†λ“¤μ— CSS μ¤νƒ€μΌμ΄ μ μ©λλ©΄μ„ μμ‹ μ μλ¦¬λ¥Ό μ°Ύμ•„κ°€λ” ν„μƒμ΄ λ°μƒν•λ”λ°, μ΄λ¥Ό Flickering(κΉλΉ΅μ„)μ΄λΌκ³  ν•΄μ”. ν΄λΌμ΄μ–ΈνΈμ—μ„ CSS μ¤νƒ€μΌμ„ λ™μ μΌλ΅ μƒμ„±ν•κ³  μ μ©ν•λ” κ³Όμ •μ—μ„ λ¦¬νμΈν…μ΄ μΌμ–΄λ‚λ©΄μ„ κΉλΉ΅μ΄λ” ν„μƒμ΄ λ°μƒν•κ³  μμ–΄μ”.

<div style="display: flex; justify-content: center" >
  <img width="500px" src="/assets/images/2024112801/styled2.gif" alt="styled2" >
</div>

μ•„λ μ‚¬μ§„μ„ ν†µν•΄μ„λ„, μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ CSS μ¤νƒ€μΌμ classNameμ΄ μ„λ΅ μ λ§¤ν•‘λ κ²ƒμ„ λ³Ό μ μμ–΄μ”. λ‹¤μ‹ λ§ν•΄μ„, className λ¶μΌμΉ λ¬Έμ λ” ν•΄κ²°λμ—μ–΄μ”.

<div style="display: flex; justify-content: center" >
  <img width="700px" src="/assets/images/2024112801/classname2.png" alt="classname2" >
</div>

μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λ HTML νμΌ(Page Source)λ¥Ό ν™•μΈν•΄λ³΄λ©΄, `hbpnQW` classNameμ€ μ°Ύμ„ μ μμ§€λ§ CSS μ¤νƒ€μΌμ μ‹¤μ²΄λ¥Ό ν™•μΈν•  μλ” μ—†μ–΄μ”. μ¦‰, μ„λ²„μ—μ„ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•΄μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬ν•λ” κ²ƒμ€ μ•„λ‹λΌλ” λ»μ΄μ—μ”.

{% include code-header.html %}

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="/_next/static/css/app/layout.css?v=1732771235506"
      data-precedence="next_static/css/app/layout.css"
    />
    <!-- ... -->
  </head>
  <body class="__variable_f92059 __variable_013f1d">
    <!-- ... -->
    <div class="Test__Test1-sc-8ae5b2a9-0 hbpnQW">
      <div class="content-box">
        <main class="PageWithBottomNav__MainContainer-sc-8893f0af-0 jKFWJB">
          <!-- ... -->
        </main>
      </div>
    </div>
    <!-- ... -->
  </body>
</html>
```

Flickeringμ€ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ™μ μΌλ΅ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•  λ• λ‚νƒ€λ‚  μ λ°–μ— μ—†λ” ν•„μ—°μ μΈ ν„μƒμ΄μ—μ”. μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄μ„λ” μ„λ²„μ—μ„ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•κ³  ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬ν•λ” κ³Όμ •μ΄ ν•„μ”ν•΄μ”.

### 2-3. Flickering λ¬Έμ  ν•΄κ²°

[Next.js κ³µμ‹ λ¬Έμ„](https://nextjs.org/docs/app/building-your-application/styling/css-in-js#styled-components)μ—λ„ μ„¤λ…λμ–΄ μλ“―μ΄, `ServerStyleSheet`λ¥Ό ν†µν•΄ Flickering λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μμ–΄μ”.

`ServerStyleSheet`λ¥Ό μ¶”κ°€ν•λ” κ³Όμ •μ€ λ‹¤μκ³Ό κ°™μ•„μ”.

`π“‚ Registry.tsx`
{% include code-header.html %}

```tsx
"use client";

import React, { useState } from "react";
import { useServerInsertedHTML } from "next/navigation";
import { ServerStyleSheet, StyleSheetManager } from "styled-components";

export default function StyledComponentsRegistry({
  children,
}: {
  children: React.ReactNode;
}) {
  // Only create stylesheet once with lazy initial state
  // x-ref: https://reactjs.org/docs/hooks-reference.html#lazy-initial-state
  const [styledComponentsStyleSheet] = useState(() => new ServerStyleSheet());

  useServerInsertedHTML(() => {
    const styles = styledComponentsStyleSheet.getStyleElement();
    styledComponentsStyleSheet.instance.clearTag();
    return <>{styles}</>;
  });

  if (typeof window !== "undefined") return <>{children}</>;

  return (
    <StyleSheetManager sheet={styledComponentsStyleSheet.instance}>
      {children}
    </StyleSheetManager>
  );
}
```

`π“‚ layout.tsx`
{% include code-header.html %}

```tsx
import StyledComponentsRegistry from "./registry";

// ...

return (
  <html lang="en">
    <body className={`${openSans.variable} ${openSansBold.variable}`}>
      <StyledComponentsRegistry>
        <div className="content-box">{children}</div>
      </StyledComponentsRegistry>
    </body>
  </html>
);
```

1. AΒ **style registry**Β to collect all CSS rules in a render.

   - λ λ”λ§ μ¤‘μ— λ¨λ“  CSS μ¤νƒ€μΌμ„ μμ§‘ν•λ” **registry μ»΄ν¬λ„νΈλ¥Ό μƒμ„±ν•΄μ”.**

2. The newΒ `useServerInsertedHTML`Β hook to inject rules before any content that might use them.

   - ServerStyleSheet κ°μ²΄λ¥Ό μƒμ„±ν•μ—¬ μ„λ²„ λ λ”λ§ μ¤‘ μƒμ„±ν•  CSS μ¤νƒ€μΌμ„ μμ§‘ν•΄μ”.
   - `useServerInsertedHTML` ν›…μ„ ν†µν•΄ λ λ”λ§ λκΈ° μ „μ— CSS μ¤νƒ€μΌμ„ μ„λ²„μ—μ„ HTMLμ `<style>` νƒκ·Έμ— μ‚½μ…ν•΄μ”.

3. A Client Component that wraps your app with the style registry during initial server-side rendering.

   - ν΄λΌμ΄μ–ΈνΈλ” Hydration μ‹ μ„λ²„λ΅λ¶€ν„° μ „λ‹¬λ°›μ€ CSS μ¤νƒ€μΌμ„ μ¬μ‚¬μ©ν•΄μ”.

μ„μ μ„¤μ •μ„ μ μ©ν• κ²°κ³Ό, μƒλ΅κ³ μΉ¨μ„ λλ¬μ„ μ„λ²„λ΅λ¶€ν„° μƒλ΅ HTMLμ„ λ°›μ•„μ™€λ„ Flickeringμ΄ λ°μƒν•μ§€ μ•λ” κ²ƒμ„ ν™•μΈν•  μ μμ–΄μ”.

<div style="display: flex; justify-content: center" >
  <img width="500px" src="/assets/images/2024112801/styled3.gif" alt="styled3" >
</div>

μ„λ²„μ—μ„ λ λ”λ§ν• HTML νμΌμ—μ„λ„ CSS μ¤νƒ€μΌμ΄ ν¬ν•¨λμ–΄ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λλ” κ²ƒμ„ ν™•μΈν•  μ μμ–΄μ”. `styled-components`λ” `<head>` νƒκ·Έ λ‚΄λ¶€μ— CSS μ¤νƒ€μΌμ„ μ£Όμ…ν•΄μ”.

`styled-components: Page Source`

{% include code-header.html %}

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="/_next/static/css/app/layout.css?v=1732771235506"
      data-precedence="next_static/css/app/layout.css"
    />
    <!-- ... -->
    <style data-styled="" data-styled-version="6.1.13">
      .fGOcmy {
        display: flex;
        flex-direction: column;
        gap: 8px;
        padding: 16px;
        border-radius: 16px;
      } /*!sc*/
      .fGOcmy div {
        justify-content: center;
      } /*!sc*/
      .esUmar {
        display: flex;
        flex-direction: column;
        gap: 32px;
        padding: 16px;
        border-radius: 16px;
      } /*!sc*/
      .esUmar div {
        justify-content: center;
      } /*!sc*/
      data-styled.g13[id="sc-dpBQxM"] {
        content: "fGOcmy,esUmar,";
      } /*!sc*/
      /* ... */
    </style>
  </head>
  <body class="__variable_f92059 __variable_013f1d">
    <!-- ... -->
    <div class="sc-fwzISk bHRhac">
      <div class="content-box">
        <main class="sc-geXuza jnLiZN">
          <!-- ... -->
        </main>
      </div>
    </div>
    <!-- ... -->
  </body>
</html>
```

μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ—μ„ Hydrationμ΄ μ‹¤ν–‰λλ©΄, `<head>` νƒκ·Έ λ‚΄λ¶€μ— CSS μ¤νƒ€μΌμ΄ μ μ •λ¦¬λλ” κ²ƒμ„ ν™•μΈν•  μ μμ–΄μ”.

`styled-components: Elements νƒ­`

{% include code-header.html %}

```html
<html lang="en">
  <head>
    <!-- ... -->
    <style data-emotion="css g7laag-MuiAppBar-root" data-s="">
      .css-g7laag-MuiAppBar-root {
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-flex-direction: column;
        -ms-flex-direction: column;
        flex-direction: column;
        width: 100%;
        box-sizing: border-box;
        -webkit-flex-shrink: 0;
        -ms-flex-negative: 0;
        flex-shrink: 0;
        position: fixed;
        z-index: 1100;
        top: 0;
        left: auto;
        right: 0;
        --AppBar-background: #1976d2;
        --AppBar-color: #fff;
        background-color: var(--AppBar-background);
        color: var(--AppBar-color);
      }
      @media print {
        .css-g7laag-MuiAppBar-root {
          position: absolute;
        }
      }
    </style>
    <style data-emotion="css zanzjh-MuiPaper-root-MuiAppBar-root" data-s="">
      .css-zanzjh-MuiPaper-root-MuiAppBar-root {
        background-color: #fff;
        color: rgba(0, 0, 0, 0.87);
        -webkit-transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
        transition: box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
        box-shadow: var(--Paper-shadow);
        background-image: var(--Paper-overlay);
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-flex-direction: column;
        -ms-flex-direction: column;
        flex-direction: column;
        width: 100%;
        box-sizing: border-box;
        -webkit-flex-shrink: 0;
        -ms-flex-negative: 0;
        flex-shrink: 0;
        position: fixed;
        z-index: 1100;
        top: 0;
        left: auto;
        right: 0;
        --AppBar-background: #1976d2;
        --AppBar-color: #fff;
        background-color: var(--AppBar-background);
        color: var(--AppBar-color);
      }
      @media print {
        .css-zanzjh-MuiPaper-root-MuiAppBar-root {
          position: absolute;
        }
      }
    </style>
    <!-- ... -->
  </head>
  <!-- ... -->
</html>
```

μ΄λ ‡κ² μ„λ²„μ—μ„ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•΄μ„ ν΄λΌμ΄μ–ΈνΈλ” λ³„λ„μ CSS νμΌμ΄λ‚ λ™μ μΈ μ¤νƒ€μΌ μ‚½μ… μ—†μ΄λ„ μ„λ²„μ—μ„ μ κ³µλ μ™„μ „ν• HTMLκ³Ό μ¤νƒ€μΌμ„ ν• λ²μ— λ°›μ•„ ν™”λ©΄μ— ν‘μ‹ν•  μ μκ² ν•λ” λ°©λ²•μ„ **_Single Render Pass_**λΌκ³  ν•΄μ”.

λ‹¤μκ³Ό κ°™μ€ μ¥μ μ΄ μμ–΄μ”.

1. CSS μ¤νƒ€μΌκ³Ό HTML λ λ”λ§μ„ ν• λ²μ λ λ”λ§ κ³Όμ •μ—μ„ μ²λ¦¬ν•  μ μκΈ° λ•λ¬Έμ—, HTMLμ΄ μ™„μ „ν ν™”λ©΄μ— λ³΄μ—¬μ§€κΈ°κΉμ§€ μ‹κ°„μ΄ λ‹¨μ¶•λκ³  Flickeringμ„ ν•΄κ²°ν•  μ μμ–΄μ”.

2. μ΄λ¬ν• νΉμ§• λ•λ¬Έμ—, μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ‘λ‹µμ„ λ¶„ν• ν•΄μ„ μ „λ‹¬ν•λ” μ¤νΈλ¦¬λ° κΈ°λ²•μ΄ κ°€λ¥ν•΄μ”. ν΄λΌμ΄μ–ΈνΈλ” HTMLμ„ μ΅°κΈμ”© λ°›μ„ μ μμ–΄ μ΄κΈ° λ λ”λ§ μ†λ„λ¥Ό λΉ λ¥΄κ² ν•  μ μμ–΄μ”.

## 3. @emotion/styled λΌμ΄λΈλ¬λ¦¬

- λ‹¤μμΌλ΅, `@emotion/styled` λΌμ΄λΈλ¬λ¦¬μ—μ„ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ μ–΄λ–»κ² μ²λ¦¬ν•λ”μ§€ μ•μ•„λ³Όκ²μ”.

### 3-1. Next.jsμ—μ„ κΈ°μ΅΄κ³Ό κ°™μ€ λ°©λ²•μΌλ΅ μ‚¬μ©ν•΄λ³΄κΈ°

νΉλ³„ν• μ„¤μ •μ„ λ”°λ΅ μ μ©ν•μ§€ μ•μ•„λ„, CSS μ¤νƒ€μΌμ΄ μ„λ²„ μ‚¬μ΄λ“μ—μ„ μ λ λ”λ§λλ” κ²ƒμ„ λ³Ό μ μμ–΄μ”. μƒλ΅κ³ μΉ¨μ„ μ—°μ†μΌλ΅ ν•΄λ³΄μ•„λ„, Flickering ν„μƒ μ—†μ΄ μμ—°μ¤λ½κ² λ λ”λ§λ©λ‹λ‹¤.

<div style="display: flex; justify-content: center" >
  <img width="500px" src="/assets/images/2024112801/emotion.gif" alt="emotion" >
</div>

`styled-components` μ²λΌ `ServerStyleSheet` νμΌμ„ μƒμ„±ν•μ§€ μ•μ•„λ„ λκΈ° λ•λ¬Έμ— μƒλ€μ μΌλ΅ μ‚¬μ©ν•κΈ°μ— νΈν• μ¥μ μ΄ μμ–΄μ”.

μ„λ²„μ—μ„ μ „λ‹¬ν•΄μ£Όλ” HTML νμΌμ—μ„λ„ μƒμ„±λ CSS μ¤νƒ€μΌμ„ ν™•μΈν•  μ μμ–΄μ”. μ„λ²„μ—μ„ μƒμ„±λ CSS μ¤νƒ€μΌμ΄ `<body>` νƒκ·Έ λ‚΄, μ‚¬μ©ν•  μ”μ† μ„μ— μ„ μ–Έλμ–΄ μλ” κ²ƒμ„ ν™•μΈν•  μ μμ–΄μ”.

`styled-components`κ°€ CSS μ¤νƒ€μΌμ„ `<head>` νƒκ·Έ λ‚΄μ— μ‚½μ…ν–λ κ²ƒκ³Ό μ°¨μ΄κ°€ μμ–΄μ”.

`@emotion/styled: Page Source`

{% include code-header.html %}

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="/_next/static/css/app/layout.css?v=1732771235506"
      data-precedence="next_static/css/app/layout.css"
    />
    <!-- ... -->
  </head>
  <body class="__variable_f92059 __variable_013f1d">
    <!-- ... -->
    <style data-emotion="css 1qy3yb1">
      .css-1qy3yb1 {
        -webkit-flex: 1;
        -ms-flex: 1;
        flex: 1;
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-align-items: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        overflow: auto;
      }
    </style>
    <div class="css-1qy3yb1">
      <div class="content-box">
        <style data-emotion="css 4b375e">
          .css-4b375e {
            height: 100%;
          }
        </style>
        <main class="css-4b375e">
          <!-- ... -->
        </main>
      </div>
    </div>
    <!-- ... -->
  </body>
</html>
```

μ΄ν›„, `styled-components`μ™€ λ§μ°¬κ°€μ§€λ΅ ν΄λΌμ΄μ–ΈνΈμ—μ„ Hydrationμ΄ μ‹¤ν–‰λ  λ•, `<head>` νƒκ·Έ λ‚΄λ¶€μ— CSS μ¤νƒ€μΌμ΄ μ μ •λ¦¬λλ” κ²ƒμ„ ν™•μΈν•  μ μμ–΄μ”.

`@emotion/styled: Elements νƒ­`

{% include code-header.html %}

```html
<html lang="en">
  <head>
    <!-- ... -->
    <style data-emotion="css 1qy3yb1" data-s="">
      .css-1qy3yb1 {
        -webkit-flex: 1;
        -ms-flex: 1;
        flex: 1;
        display: -webkit-box;
        display: -webkit-flex;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-align-items: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        overflow: auto;
      }
    </style>
    <style data-emotion="css 4b375e" data-s="">
      .css-4b375e {
        height: 100%;
      }
    </style>
    <!-- ... -->
  </head>
  <!-- ... -->
</html>
```

## 4. κ³µν†µμ 

`@emotion/styled`μ™€ `styled-components` λ‘ λ‹¤ μ„μ™€ κ°™μ΄ CSS μ¤νƒ€μΌμ„ μ„λ²„ μ‚¬μ΄λ“μ—μ„ μ‚¬μ©ν•κΈ° μ„ν•΄μ„λ”, νμΌ μµμƒλ‹¨μ— `use client`λ¥Ό μ‚¬μ©ν•΄ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ λ§λ“¤μ–΄μ•Ό ν•΄μ”.

μ–Έλ» λ³΄λ©΄ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•κ² λ§λ“λ” μ½”λ“λΌκ³  μƒκ°ν•  μλ„ μμ§€λ§, κ·Έλ ‡μ§€ μ•μ•„μ”. λ‘ λΌμ΄λΈλ¬λ¦¬ λ¨λ‘ `use client`κ°€ μ„ μ–Έλμ—λ”λΌλ„, μ„λ²„μ—μ„ CSS μ¤νƒ€μΌμ„ μƒμ„±ν•κ³  μ΄κΈ° λ λ”λ§μ—μ„ CSS μ¤νƒ€μΌμ„ HTMLμ— μ‚½μ…ν•λ‹¤λ” κ²ƒμ— μ μν•κ³  μ‚¬μ©ν•΄μ•Ό ν•΄μ”.

`π“‚ Test.tsx`

{% include code-header.html %}

```tsx
"use client";
import styled from "styled-components";
import { ReactNode } from "react";

const TestComponent = ({ children }: { children: ReactNode }) => {
  return <StyledTest>{children}</StyledTest>;
};

export default TestComponent;

const StyledTest = styled.div`
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: auto;
`;
```

`π“‚ layout.tsx`

{% include code-header.html %}

```tsx
import StyledComponentsRegistry from "./registry";
import TestComponent from "./Test";

// ...

return (
  <html lang="en">
    <body>
      <StyledComponentsRegistry>
        <TestComponent>
          <div className="content-box">{children}</div>
        </TestComponent>
      </StyledComponentsRegistry>
    </body>
  </html>
);
```

`use client`λ΅ μ„ μ–Έν• `TestComponent` μ»΄ν¬λ„νΈμ `StyledTest`μ CSS μ¤νƒ€μΌμ΄ HTMLμ— ν¬ν•¨λ κ²ƒμ„ ν™•μΈν•  μ μμ–΄μ”.

<div style="display: flex; justify-content: center" >
  <img width="800px" src="/assets/images/2024112801/useclient.png" alt="useclient" >
</div>

`use client`λ¥Ό μ„ μ–Έν•΄λ„ μ„λ²„μ—μ„ CSS μ¤νƒ€μΌ μƒμ„±μ΄ λκΈ° λ•λ¬Έμ— `styled-components`λ‚ `@emotion/styled`λ¥Ό μ‚¬μ©ν•  λ•, ν•„μ”ν•λ©΄ `use client`λ¥Ό μμ λ΅­κ² μ‚¬μ©ν•΄λ„ λΌμ”.

ν•μ§€λ§ `use client`λ¥Ό λ‚¨μ©ν•κ² λλ©΄, ν΄λΌμ΄μ–ΈνΈ λ λ”λ§λλ” λ¶€λ¶„μ΄ μ¦κ°€ν•κΈ° λ•λ¬Έμ— SEOμ— μ•…μν–¥μ΄ μκ±°λ‚ Javascript λ²λ“¤ μµμ ν™”κ°€ μ–΄λ ¤μ›μ§€λ” λ‹¨μ μ΄ μμ–΄μ”. λ”°λΌμ„ λ°λ“μ‹ ν•„μ”ν• λ¶€λ¶„μ—λ§ `use client`λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μ•„μ”.

κ·Έλ¦¬κ³  μ„λ²„ μ»΄ν¬λ„νΈμ—μ„ λ‘ λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•κΈ° μ„ν•΄μ„λ”, μ„μ `TestComponent`μ κ²½μ°μ²λΌ νμΌμ„ λ¶„λ¦¬ν•΄μ•Ό ν•  μλ„ μμ–΄μ”. μ΄λ° κ³Όμ •μ΄ λ²κ±°λ΅μΈ λ•μ—λ” λΌμ΄λΈλ¬λ¦¬ λ€μ‹ , Next.jsμ CSS λ¨λ“μ΄λ‚ Global CSSμ²λΌ λ‹¤λ¥Έ λ°©λ²•μ„ μ‚¬μ©ν•λ” λ°©λ²•λ„ μμ–΄μ”.

## 5. μ°¨μ΄μ 

### λ³„λ„μ μ„¤μ • μ—¬λ¶€

- `@emotion/styled`: λ³µμ΅ν• `ServerStyleSheet` μ„¤μ •μ΄ ν•„μ”μ—†μ΄, νΈν•κ² μ‚¬μ©ν•  μ μμ–΄μ”.

- `styled-components`: `ServerStyleSheet`κ³Ό κΈ°νƒ€ νμΌ μ„¤μ •μ΄ ν•„μ”ν•΄μ”.

### λ™μ‘ λ°©μ‹

- `@emotion/styled`: μ„λ²„μ—μ„ λ λ”λ§λ μ¤νƒ€μΌμ„ `<head>` νƒκ·Έ λ‚΄μ— ν¬ν•¨μ‹μΌ μ „λ‹¬ν•΄μ”.

- `styled-components`: μ„λ²„μ—μ„ λ λ”λ§λ μ¤νƒ€μΌμ„ `<body>` νƒκ·Έ λ‚΄μ— ν¬ν•¨μ‹μΌ μ „λ‹¬ν•΄μ”.

### Material UIμ™€μ νΈν™μ„±

`Material UI`λ” `styled-components`μ™€ νΈν™λμ§€ μ•λ”λ‹¤κ³  [κ³µμ‹ λ¬Έμ„](https://mui.com/material-ui/integrations/styled-components/)μ— λ‚μ™€ μμ–΄μ”.

`Material UI`λ” μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ μ„ν•μ—¬ λ‚΄λ¶€μ μΌλ΅ `@emotion`μ„ μ‚¬μ©ν•κΈ° λ•λ¬Έμ— λ‘ λΌμ΄λΈλ¬λ¦¬ μ¤‘μ—μ„λ” `@emotion/styled`κ°€ λ” μ ν•©ν• μ„ νƒμ΄μ—μ”.

`styled-components`μ™€ `Material UI`λ¥Ό ν•¨κ» μ‚¬μ©ν•λ©΄μ„ μ•„λμ™€ κ°™μ€ λ²„κ·Έλ¥Ό λ°κ²¬ν–μ–΄μ”.

<div style="display: flex; justify-content: center" >
  <img width="500px" src="/assets/images/2024112801/mui.gif" alt="mui" >
</div>

{% include code-header.html %}

```tsx
import Slider from "@mui/material/Slider";
import styled from "styled-components";

<QuizOptionLayout title="Rounds" spacing="large">
  <SliderWrapper
    aria-label="quiz-round"
    defaultValue={round}
    step={10}
    min={10}
    valueLabelDisplay="on"
    marks={roundMarks}
    onChange={handleRoundChange}
  />
</QuizOptionLayout>;

const SliderWrapper = styled(Slider)`
  width: 80%;
`;
```

`styled(Slider)`μ²λΌ λ‘ λΌμ΄λΈλ¬λ¦¬λ¥Ό ν•¨κ» μ‚¬μ©ν•κ² λλ©΄, Flickering ν„μƒμ΄ λ°μƒν•΄μ”. μ„λ²„μ—μ„ μƒμ„±λ HTMLμ„ ν™•μΈν•λ©΄ λ¶„λ…ν μ„λ²„μ—μ„ CSS μ¤νƒ€μΌμ΄ μƒμ„±λκ³  μ „λ‹¬λλ”λ° μ—¬μ „ν Flickeringμ΄ λ‚νƒ€λ‚μ”.

{% include code-header.html %}

```html
.hjUJLN{width:80%;}/*!sc*/
data-styled.g17[id="QuizOptions__SliderWrapper-sc-753c67a3-2"]{content:"hjUJLN,"}/*!sc*/
<span
  class="MuiSlider-root MuiSlider-marked MuiSlider-colorPrimary MuiSlider-sizeMedium sc-cEzcPc hjUJLN css-1e45yg4-MuiSlider-root"
>
  // ...
</span>
```

μ•„λμ²λΌ κµ¬μ΅°λ¥Ό λ³€κ²½ν–λ”λ‹ Flickering λ¬Έμ κ°€ ν•΄κ²°λμ—μ–΄μ”. λ‘ λΌμ΄λΈλ¬λ¦¬κ°€ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ μ²λ¦¬ν•λ” λ°©λ²•μ΄ μ„λ΅ λ‹¤λ¥΄κΈ° λ•λ¬Έμ— μ¤λ¥κ°€ λ°μƒν–μ„ μλ„ μμ–΄μ”. λΌμ΄λΈλ¬λ¦¬ κ°„μ κµ¬λ¶„μ„ λ…ν™•ν•κ² ν•κ±°λ‚, μ‚¬μ©ν•λ” λΌμ΄λΈλ¬λ¦¬λ¥Ό `@emotion/styled`λ΅ λ³€κ²½ν•μ—¬ ν•΄κ²°ν•  μ μμ–΄μ”.

{% include code-header.html %}

```tsx
import Slider from "@mui/material/Slider";
import styled from "styled-components";

<QuizOptionLayout title="Rounds" spacing="large">
  <SliderWrapper>
    <Slider
      aria-label="quiz-round"
      defaultValue={round}
      step={10}
      min={10}
      valueLabelDisplay="on"
      marks={roundMarks}
      onChange={handleRoundChange}
    />
  </SliderWrapper>
</QuizOptionLayout>;

const SliderWrapper = styled.div`
  width: 80%;
`;
```

## 6. ν”„λ΅μ νΈμ—μ„μ μ„ νƒ: @emotion/styled

1. μ§„ν–‰ν•λ” ν”„λ΅μ νΈμ—μ„ `Material UI`λ¥Ό μ‚¬μ©ν•κΈ° λ•λ¬Έμ—, λ‚΄λ¶€μ μΌλ΅ μ‚¬μ©ν•λ” λΌμ΄λΈλ¬λ¦¬μΈ `@emotion`μ™€ νΈν™μ΄ λλ” λΌμ΄λΈλ¬λ¦¬λ΅ μ„ νƒν•μ€μ–΄μ”.

2. `styled-components`μ²λΌ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ μ μ©ν•κΈ° μ„ν•΄ μ‘μ„±ν•΄μ•Ό ν•λ” νμΌμ΄ μ—†λ‹¤λ” μ μ΄ μ‚¬μ©ν•κΈ°μ— λ” νΈν•κΈ° λ•λ¬Έμ— μ„ νƒν•μ€μ–΄μ”.

## 7. κ²°λ΅ 

### styled-components

- μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ μ‚¬μ©ν•κΈ° μ„ν•΄μ„, `next.config.mjs`μ™€ `ServerStyleSheet` μ„¤μ •μ΄ ν•„μ”ν•΄μ”.
  - `next.config.mjs`: ν΄λμ¤λ„¤μ„ λ¶μΌμΉ λ¬Έμ λ¥Ό ν•΄κ²°ν•΄μ”.
  - `ServerStyleSheet`: Flickering λ¬Έμ λ¥Ό ν•΄κ²°ν•΄μ”.

### @emotion/styled

- λ³„λ„μ μ„¤μ • μ—†μ΄λ„ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ μ§€μ›ν•΄μ”.

### κ³µν†µμ 

- `styled` λ“± APIλ¥Ό μ‚¬μ©ν•κΈ° μ„ν•΄μ„λ” `use client` μ„ μ–Έμ΄ ν•„μ”ν•΄μ”.
- ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ λ§λ“¤μ–΄λ„ μ„λ²„μ—μ„ CSS μ¤νƒ€μΌμ΄ μƒμ„±λΌμ”.

### μ°¨μ΄μ 

- μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ„ ν•κΈ° μ„ν•΄ λ³„λ„μ μ„¤μ • μ—¬λ¶€κ°€ λ‹¬λΌμ”.
- λ‚΄λ¶€μ μΈ λ™μ‘ λ°©μ‹μ΄ λ‹¬λΌμ”.
- Material UIμ™€μ νΈν™μ„±μ— μ°¨μ΄κ°€ μμ–΄μ”.
